{% if section.blocks.size > 0 %}
  {% for block in section.blocks %}
    {% assign img_url = block.settings.image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' %}

    {% if block.type == 'video' %}
      <div
        class="videoBox"
        style="{% if block.settings.video_link == blank %}background-image: url('{{ block.settings.video_image | img_url: 'master' }}');{% endif %}"
      >
        {% if block.settings.video_link != blank %}
          <div class="fullscreen-video-wrap">
            <video
              class="video-js"
              loop
              autoplay
              preload="none"
              muted
              playsinline
              poster="https:{{ block.settings.video_image | img_url: 'master' }}"
            >
              <source src="{{ block.settings.video_link }}" type="video/mp4">
            </video>
          </div>
        {% endif %}

        {% if block.settings.mobile_video_link != blank %}
          <div class="mobile-video-wrap">
            <video
              class="video-js mobile-video"
              loop
              autoplay
              preload="none"
              muted
              playsinline
              poster="https:{{ block.settings.video_image | img_url: 'master' }}"
            >
              <source src="{{ block.settings.mobile_video_link }}" type="video/mp4">
            </video>
          </div>
        {% endif %}

        <div class="overlay" style="opacity: 0.{{ block.settings.overlay_opacity }}"></div>

        <div class="videoBoxInfo">
          {% if block.settings.title != blank %}
            <h1 class="videoBoxInfoTitle" style="color: {{ block.settings.color_text }}">
              {{ block.settings.title | escape }}
            </h1>
          {% endif %}

          <style>
            .videoBackground .imageBoxInfoDescription p {

            color: {{ block.settings.color_text }}!important;

            }
          </style>

          {% if block.settings.text != blank %}
            <div class="imageBoxInfoDescription" id="{{ block.id }}" style="color: {{ block.settings.color_text }}">
              {{ block.settings.text }}
            </div>
          {% endif %}

          {% if block.settings.button_link != blank and block.settings.button_label != blank %}
            <a
              href="{{ block.settings.button_link }}"
              class="videoBoxInfoBtn"
              style="color: {{ block.settings.color_btn_text }}; background: {{ block.settings.color_btn_bg }}"
            >
              {{ block.settings.button_label | escape }}
            </a>
          {% endif %}

          {% if block.settings.button_link_2 != blank and block.settings.button_label_2 != blank %}
            <a
              href="{{ block.settings.button_link_2 }}"
              class="videoBoxInfoBtn"
              style="color: {{ block.settings.color_btn_text_2 }}; background: {{ block.settings.color_btn_bg_2 }}"
            >
              {{ block.settings.button_label_2 | escape }}
            </a>
          {% endif %}

          {% if block.settings.button_link_3 != blank and block.settings.button_label_3 != blank %}
            <a
              href="{{ block.settings.button_link_3 }}"
              class="videoBoxInfoBtn"
              style="color: {{ block.settings.color_btn_text_3 }}; background: {{ block.settings.color_btn_bg_3 }}"
            >
              {{ block.settings.button_label_3 | escape }}
            </a>
          {% endif %}

          {% if block.settings.button_link_4 != blank and block.settings.button_label_4 != blank %}
            <a
              href="{{ block.settings.button_link_4 }}"
              class="videoBoxInfoBtn"
              style="color: {{ block.settings.color_btn_text_4 }}; background: {{ block.settings.color_btn_bg_4 }}"
            >
              {{ block.settings.button_label_4 | escape }}
            </a>
          {% endif %}
        </div>
      </div>

    {% else %}
      <div
        class="imageBox"
        style="background-color: {{ block.settings.color_bg }}; {% if block.settings.image_bg != blank %}background-image: url('{{ block.settings.image_bg | img_url: 'master' }}');{% endif %}"
      >
        <div class="overlay" style="opacity: 0.{{ block.settings.overlay_opacity }}"></div>

        <div class="imageBoxInfo">
          {% if block.settings.title != blank %}
            <h1 class="imageBoxInfoTitle" style="color: {{ block.settings.color_text }}">
              {{ block.settings.title | escape }}
            </h1>
          {% endif %}

          <style>
            .videoBackground .imageBoxInfoDescription p {

            color: {{ block.settings.color_text }}!important;

            }
          </style>

          {% if block.settings.text != blank %}
            <div class="imageBoxInfoDescription" id="{{ block.id }}" style="color: {{ block.settings.color_text }}">
              {{ block.settings.text }}
            </div>
          {% endif %}

          {% if block.settings.button_link != blank and block.settings.button_label != blank %}
            <a
              href="{{ block.settings.button_link }}"
              class="imageBoxInfoBtn"
              style="color: {{ block.settings.color_btn_text }}; background: {{ block.settings.color_btn_bg }}"
            >
              {{ block.settings.button_label | escape }}
            </a>
          {% endif %}

          {% if block.settings.button_link_2 != blank and block.settings.button_label_2 != blank %}
            <a
              href="{{ block.settings.button_link_2 }}"
              class="imageBoxInfoBtn"
              style="color: {{ block.settings.color_btn_text_2 }}; background: {{ block.settings.color_btn_bg_2 }}"
            >
              {{ block.settings.button_label_2 | escape }}
            </a>
          {% endif %}

          {% if block.settings.button_link_3 != blank and block.settings.button_label_3 != blank %}
            <a
              href="{{ block.settings.button_link_3 }}"
              class="imageBoxInfoBtn"
              style="color: {{ block.settings.color_btn_text_3 }}; background: {{ block.settings.color_btn_bg_3 }}"
            >
              {{ block.settings.button_label_3 | escape }}
            </a>
          {% endif %}

          {% if block.settings.button_link_4 != blank and block.settings.button_label_4 != blank %}
            <a
              href="{{ block.settings.button_link_4 }}"
              class="imageBoxInfoBtn"
              style="color: {{ block.settings.color_btn_text_4 }}; background: {{ block.settings.color_btn_bg_4 }}"
            >
              {{ block.settings.button_label_4 | escape }}
            </a>
          {% endif %}
        </div>
      </div>
    {% endif %}
  {% endfor %}

{% else %}
  <div class="placeholderNoblocks">
    This section doesnâ€™t currently include any content. Add content to this section using the sidebar.
  </div>
{% endif %}

<style>

     .videoBackground {

     height: 100%;

     position: relative;

     }

     .videoBackground .fullscreen-video-wrap, .videoBackground .mobile-video-wrap {

     position: absolute;

     top: 0;

     left: 0;

     min-width: 100%;

     width: 100%;

     height: 100%;

     overflow: hidden;

     }

     .videoBackground .fullscreen-video-wrap .video-js, .videoBackground .mobile-video-wrap .video-js {

     position: absolute;

     top: 0;

     left: 0;

     min-height: 100%;

     min-width: 100%;

     width: 100%;

     height: 100%;

     object-fit: cover;

     }

     .videoBackground .fullscreen-video-wrap video, .videoBackground .mobile-video-wrap video {

     min-height: 100%;

     min-width: 100%;

     object-fit: cover;

     }

     .videoBackground .mobile-video-wrap {

     display: none;

     }

     .videoBackground .videoBox {

     display: flex;

     align-items: center;

     justify-content: flex-end;

     flex-direction: column;

     padding: 100px 20px 80px;

     background-size: cover;

     background-position: center;

     background-repeat: no-repeat;

     min-height: 900px;

     max-height: 800px;

     height: calc(100vh - 165px);

     position: relative;

     }

     .videoBackground .imageBox {

     display: flex;

     align-items: center;

     justify-content: flex-end;

     flex-direction: column;

     padding: 100px 20px 80px;

     background-size: cover;

     background-position: center;

     background-repeat: no-repeat;

     position: relative;

     min-height: calc(100vh - 165px);

     height: auto;

     }

     .videoBackground .videoBoxInfo, .videoBackground .imageBoxInfo {

     z-index: 2;

     text-align: center;

     }

     .videoBackground .overlay {

     content: "";

     position: absolute;

     top: 0;

     right: 0;

     bottom: 0;

     left: 0;

     background: #000;

     z-index: 1;

     }

     .videoBackground .videoBoxInfoBtn, .videoBackground .imageBoxInfoBtn {

     -moz-user-select: none;

     -ms-user-select: none;

     -webkit-user-select: none;

     user-select: none;

     -webkit-appearance: none;

     -moz-appearance: none;

     appearance: none;

     display: inline-block;

     width: auto;

     text-decoration: none;

     text-align: center;

     vertical-align: middle;

     cursor: pointer;

     border: 1px solid transparent;

     border-radius: 2px;

     padding: 8px 15px;

     font-style: normal;

     font-weight: 800;

     text-transform: uppercase;

     letter-spacing: 0.06em;

     white-space: normal;

     font-size: 14px;

     margin-top: 20px;

     }

     .videoBackground .videoBoxInfoTitle, .videoBackground .imageBoxInfoTitle {

     color: #FFF;

     font-size: 30px;

     line-height: 40px;

     }

     .videoBackground .videoBoxInfoDescription, .videoBackground .imageBoxInfoDescription {

     max-width: 500px;

     margin: 0 auto;

     }

     .videoBackground .videoBoxInfoDescription p, .videoBackground .imageBoxInfoDescription p {

     font-size: 18px;

     line-height: 28px;

     }

     .videoBackground .placeholderNoblocks {

     text-align: center;

     max-width: 500px;

     margin: 0 auto;

     }

     @media screen and (max-width: 767px) {
       .page-whats-inside div#PageContainer {
      padding-top: 75px;
  }

     /* .videoBackground .fullscreen-video-wrap {
       display: none;
     }
    */
     .videoBackground .mobile-video-wrap {
       position: relative;
     }


     .main-content .videoBackground {

     margin-top: -35px;

     }

     .videoBackground .fullscreen-video-wrap {

     z-index: 3;

     }

     .videoBackground .videoBox {

     min-height: 100%;

     height: 100%;

     position: relative;

     padding: 0;

     }

     .videoBackground .fullscreen-video-wrap {

     position: relative;

     min-height: 370px;

     }

     /* .videoBackground .videoBoxInfo {

     padding: 40px 20px;

     background: #000;

     width: 100%;

     } */

     .videoBackground .mobile-video-wrap {

     display: block;

     }

     .videoBackground .video-js.mobile-video {

     position: absolute;

     top: 0;

     left: 0;

     min-height: 100%;

     min-width: 100%;

     width: 100%;

     height: 100%;

     object-fit: cover;

     }

     }
</style>

{% schema %}
{
  "name": "Video Background",
  "class": "videoBackground",
  "max_blocks": 1,
  "blocks": [
        {
        "type": "video",
        "name": "Video",
        "settings": [
           {
            "type": "url",
            "id": "video_link",
            "label": "Video link"
           },
            {
            "type": "image_picker",
            "id": "video_image",
            "label":"Cover image"
            },
            {
            "type": "url",
            "id": "mobile_video_link",
            "label": "Mobile video link"
            },
            {
            "type": "range",
            "id": "overlay_opacity",
            "label":"Overlay opacity",
            "min": 0,
            "max": 99,
            "step": 1,
            "unit":"%",
            "default": 0
            },
            {
            "type": "header",
            "content":"Text"
            },
            {
            "type": "text",
            "id": "title",
            "default": "Video slide",
            "label": "Heading"
            },
            {
            "type": "richtext",
            "id": "text",
            "label":"Description",
            "default": "<p>Use this text to share information about your brand with your customers.</p>"
            },
            {
            "type": "color",
            "id": "color_text",
            "label":"Text color",
            "default": "#ffffff"
            },
            {
            "type": "text",
            "id": "button_label",
            "label":"Button label"
            },
            {
            "type": "url",
            "id": "button_link",
            "label":"Button link"
            },
            {
            "type": "text",
            "id": "button_label_2",
            "label":"Second button label"
            },
            {
            "type": "url",
            "id": "button_link_2",
            "label": "Second button link"
            },
            {
            "type": "text",
            "id": "button_label_3",
            "label":"Third button label"
            },
            {
            "type": "url",
            "id": "button_link_3",
            "label":"Third button link"
            },
            {
            "type": "text",
            "id": "button_label_4",
            "label": "Fourth button label"
            },
            {
            "type": "url",
            "id": "button_link_4",
            "label": "Fourth button link"
            },
            {
            "type": "color",
            "id": "color_btn_bg",
            "label":"Background button color",
            "default": "#ffffff"
            },
            {
            "type": "color",
            "id": "color_btn_text",
            "label": "Button text color",
            "default": "#ffffff"
            }
          ]
        },
              {
              "type": "image",
              "name": "Image",
              "settings": [
              {
              "type": "color",
              "id": "color_bg",
              "label": "Background color (optional)",
              "default": "#16165b"
              },
              {
              "type": "image_picker",
              "id": "image_bg",
              "label": "or use an image (required)"
              },
              {
              "type": "range",
              "id": "overlay_opacity",
              "label": "Overlay opacity",
              "min": 0,
              "max": 99,
              "step": 1,
              "unit": "%",
              "default": 0
              },
              {
              "type": "header",
              "content":"Text"
              },
              {
              "type": "text",
              "id": "title",
              "default": "Image slide",
              "label": "Heading"
              },
              {
              "type": "richtext",
              "id": "text",
              "label": "Description",
              "default": "<p>Use this text to share information about your brand with your customers.</p>"
              },
              {
              "type": "color",
              "id": "color_text",
              "label": "Text color",
              "default": "#ffffff"
              },
              {
              "type": "text",
              "id": "button_label",
              "label": "Button label"
              },
              {
              "type": "url",
              "id": "button_link",
              "label": "Button link"
              },
              {
              "type": "color",
              "id": "color_btn_bg",
              "label": "Background button color",
              "default": "#ffffff"
              },
              {
              "type": "color",
              "id": "color_btn_text",
              "label": "Button text color",
              "default": "#ffffff"
              }
              ]
              }
        ],
   "presets": [
        {
        "name": "Video Banner",
        "category": {
        "en": "Main"
        },
        "blocks": [
          {
           "type": "video"
          }
        ]
       }
      ]
 }
{% endschema %}
